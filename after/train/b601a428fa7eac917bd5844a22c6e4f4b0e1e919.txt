Coronavirus 2019 , caused by the SARS-CoV-2 virus, has become the 86 deadliest pandemic in modern history, reaching nearly every country worldwide and 87 overwhelming healthcare institutions. As of April 20, there have been more than 2.4 88 million confirmed cases with over 160,000 deaths. Extreme case surges coupled with 89 challenges in forecasting the clinical course of affected patients have necessitated 90 thoughtful resource allocation and early identification of high-risk patients. However, 91 effective methods for achieving this are lacking. In this paper, we use electronic health 92 records from over 3,055 New York City confirmed COVID-19 positive patients across 93 five hospitals in the Mount Sinai Health System and present a decision tree-based 94 machine learning model for predicting in-hospital mortality and critical events. This 95 model is first trained on patients from a single hospital and then externally validated on 96 patients from four other hospitals. We achieve strong performance, notably predicting 97 mortality at 1 week with an AUC-ROC of 0.84. Finally, we establish model 98 interpretability by calculating SHAP scores to identify decisive features, including age, 99 inflammatory markers (procalcitonin and LDH), and coagulation parameters (PT, PTT, 100 D-Dimer). To our knowledge, this is one of the first models with external validation to 101 both predict outcomes in COVID-19 patients with strong validation performance and 102 identify key contributors in outcome prediction that may assist clinicians in making 103 effective patient management decisions.
Despite substantial, organized efforts to prevent disease spread, over 2.4 million people 108 have tested positive for SARS-CoV-2 worldwide, and there have been more than 109 169,000 deaths to date(1-3). As a result of this pandemic, hospitals are being filled 110 beyond capacity and face extreme challenges with regards to personnel staffing, 111 personal protective equipment availability, and ICU bed allocation. Additionally, patients 112 with COVID-19 demonstrate varying symptomatology, making successful and safe 113 patient triaging difficult. While some infected patients are asymptomatic, others suffer 114 from severe acute respiratory distress syndrome, multiorgan failure, and death(4). 115 Identification of key patient characteristics that govern the course of disease across 116 large patient cohorts is lacking but important, particularly given the potential it has to aid 117 physicians and hospitals in predicting disease trajectory, to allocate essential resources 118 effectively, and to improve patient outcomes. With these needs in mind, we report the 
Clinical Data Source and Study Population 128 We retrieved electronic health records for 3,055 COVID-19-positive inpatient 129 admissions at five hospitals between March 9, 2020 and April 11, 2020 within the Mount 130 Sinai Health System (MSHS). These data included patient demographics, past medical 131 history, and admission vitals and labs (Table 1, Supplementary Table 2) . Relevant 132 patient events (intubation, discharge to hospice care, or death) were recorded and 133 subsets were constructed at 3, 5, 7, and 10 day intervals after admission ( Figure 1 ). Of 134 these patients, 17.0% to 31.6% had a critical event (intubation, discharge to hospice 135 care, or death) and 6.0% to 21.5% died over the observed time frames (Supplementary   136   Table 1 ). In contrast, the control group consisted of patients with all other discharge 137 dispositions and those that were still hospitalized. CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. . the other hospitals (OH) in the MSHS. While multiple time limits for event occurrence 147 were assessed, the results and discussion in this letter focus predominantly one week 148 after admission. As a control, both simple and generalized additive logistic regression 149 models were trained to assess performance, given their ubiquity as the preferred model 150 in current COVID research pieces. 151 152 After training, the classifier robustly predicted the presence of a critical event at three, 153 five, seven, and 10 days (Figure 2 and Supplementary Table 4) as measured by area 154 under the receiver operating characteristic curve (AUC-ROC = 0.74 for OH, 0.83 for 155 MSH at 1 week) and area under the precision-recall curve (AUPRC = 0.58 for OH, 0.49 156 for MSH at 1 week). We were able to achieve similar performance at predicting critical 157 events at longer intervals, namely 15 and 20 days (Supplementary Table 5 ). As a 158 baseline comparison, the logistic regression models (Supplementary Table 6 (AST), and D-dimer. Finally, using SHAP interaction scores, we discovered that 182 covariate interactions between features, relative to each feature's independent 183 importance, contributed less to the model's prediction ( Supplementary Figures 1-4) . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)
The copyright holder for this preprint this version posted April 28, 2020. . We highlight several important findings that have implications in clinical medicine. First, 187 we offer robust prediction algorithms pertaining to the most clinically severe outcomes 188 based solely on admission metrics. This insight provides the likely hospital course for 189 patients up to 10 days into the future. High sensitivity in predicting mortality within three, Just as interesting as the features present in the SHAP value analysis were those that 220 were not. For example, because race is both poorly represented ("Unknown") and 221 categorized inadequately in electronic health records, the model did not find race to be 222 important for outcome prediction and instead opted to favor more objective data (vitals, 223 labs). Contrary to our expectation, age was not identified as a significant feature for 224 critical event prediction in these primary analyses. However, SHAP value analyses for 225 critical event prediction at longer time frames (10, 15, and 20 days) revealed an 226 . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)
The copyright holder for this preprint this version posted April 28, 2020. . increasing importance on age for outcome prediction (Supplementary Figure 5) . This 227 trend suggests the model's decision to capture acute events by relying on more 228 objective measures not confounded by other factors that are cached into age, which 229 may better represent illness severity. However, over time, age may become a better 230 marker for critical event prediction, by offering a more stable container of clinical 231 information, given its invariance to change relative to other features. As such, the 232 classifier becomes optimized for predicting severe events earlier in the course of illness.
The results of our models should be considered in light of several limitations. First, we CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. . Demographics included age, sex, as well as reported race, and ethnicity. Race was 307 collapsed into seven categories based off of the most recent US census race 308 categories: American Indian or Alaskan Native, Asian, Black or African-American, 309 Other, Native Hawaiian or Other Pacific Islander, Unknown, and White. Ethnicity was 310 collapsed into three categories: Hispanic/Latino, Non-Hispanic/Latino, and Unknown. 311 We obtained demographics, diagnosis codes (International Classification of Diseases-312 9/10-Clinical Modification (ICD-9/10-CM) codes and procedures), as well as vital signs 313 and laboratory measurements during hospitalization. A pre-existing condition was 314 defined as the presence of ICD-9/10-CM codes associated with specific diseases. We single lab category was chosen as the representative lab value for that category. 345 Finally, lab data below the 0.5th and above the 99.5th percentiles were removed to 346 . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. . avoid inclusion of any obvious outliers that could represent incorrect documentation and 347 measurement error.
Definition of Outcomes 350 The two primary outcomes were 1) death versus survival or discharge, and 2) critical 351 illness versus survival or discharge, through time horizons of 3, 5, 7, and 10 days. is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. . these models do not have a built in method of dealing with missing data, we dropped 385 features with over 70% missingness and samples that lacked values for the remaining 386 feature space. The models were trained and evaluated using 10-fold stratified cross 387 validation on patient data from MSH and subsequently evaluated on patient data from 388 the other hospitals. The same metrics were recorded for these models; however, this 389 model was only trained at outcome prediction on Day 3, which was the time frame at 390 which model AUC-ROC was highest for the XGBoost classifier. Performance results for 391 this classifier are represented in Supplementary Table 5. 392 . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. . is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. . is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. . is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. . is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020.
. . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. . is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. . . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. . . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. .
Final hyperparameters for the XGBoost classifier at day 7 for critical event and mortality 572 prediction after tuning using a grid-search to optimize for AUC-ROC. is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.
The copyright holder for this preprint this version posted April 28, 2020. . Outcomes are structured by "<outcome>_<day>", where outcome is either a critical 581 event (CRITICAL) or mortality (MORTALITY) and the time frame it was predicted over. 582 "OUTCOME PROP" refers to the portion of the dataset with the respective outcome. . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)
The copyright holder for this preprint this version posted April 28, 2020. . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)
The copyright holder for this preprint this version posted April 28, 2020. . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. (which was not certified by peer review)
The copyright holder for this preprint this version posted April 28, 2020. .
